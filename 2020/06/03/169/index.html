<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.2">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.2">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.2">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.2" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.2">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.4.2',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="Data Structure最近准备学习coursera上的《算法与数据结构系列课程》，这个课程是数据结构的课程，当然对于数据结构这门课程基本的东西已经非常的熟悉了，。对于特别需要独立思考的问题，适当建议对于卡到壳的时候，一定要先放一放，去外面散步或者多运动，只有这样利用自己的发散思维就能把问题解决出来，仔细思考一下这种思考模式，在《learning how to learn》课程中学到的知识应用">
<meta name="keywords" content="《Data Structure》">
<meta property="og:type" content="article">
<meta property="og:title" content="【Coursera】 算法课程">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;2020&#x2F;06&#x2F;03&#x2F;169&#x2F;index.html">
<meta property="og:site_name" content="blow in the wind">
<meta property="og:description" content="Data Structure最近准备学习coursera上的《算法与数据结构系列课程》，这个课程是数据结构的课程，当然对于数据结构这门课程基本的东西已经非常的熟悉了，。对于特别需要独立思考的问题，适当建议对于卡到壳的时候，一定要先放一放，去外面散步或者多运动，只有这样利用自己的发散思维就能把问题解决出来，仔细思考一下这种思考模式，在《learning how to learn》课程中学到的知识应用">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2020-06-03T05:10:18.738Z">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/2020/06/03/169/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>【Coursera】 算法课程 | blow in the wind</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="blow in the wind" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">blow in the wind</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">no one will be your god, your god is just yourself!</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/mike-box" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/03/169/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/pic.jpg">
      <meta itemprop="name" content="Mike meng">
      <meta itemprop="description" content="a clever man and a foolish man!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blow in the wind">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【Coursera】 算法课程
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-06-03 13:09:50 / Modified: 13:10:18" itemprop="dateCreated datePublished" datetime="2020-06-03T13:09:50+08:00">2020-06-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine: </span>
    
    <a title="valine" href="/2020/06/03/169/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/06/03/169/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Data-Structure"><a href="#Data-Structure" class="headerlink" title="Data Structure"></a>Data Structure</h1><p>最近准备学习<code>coursera</code>上的《算法与数据结构系列课程》，这个课程是数据结构的课程，当然对于数据结构这门课程基本的东西已经非常的熟悉了，。<br>对于特别需要独立思考的问题，适当建议对于卡到壳的时候，一定要先放一放，去外面散步或者多运动，只有这样利用自己的发散思维就能把问题解决出来，仔细思考一下这种思考模式，在《learning how to learn》课程中学到的知识应用到这些科学知识，真的是非常有用。<br>抽了大概一周的时间把课程《Data Structure》学习完了，这部分的课程有些还是非常难，最后的<code>splaytree</code>太复杂了，没有做完，总得来说质量还是非常高得，虽然里面得算法大部分都学过，还是继续温习了一遍，已经会得算法就没有仔细再重新学习掌握，主要把<code>hashtable</code>和<code>splaytree</code>又重新温习了一遍。最后得分是<code>85.90</code> 分，证书如下：<br><a href="https://www.coursera.org/account/accomplishments/certificate/WMMZ3YUHX4QA" target="_blank" rel="noopener">Data Structure</a><br>下面将该课程的题目的解法。<br>该课程所有提交的代码如下：<br><a href="https://github.com/mike-box/coursera/tree/master/Data%20Structrues" target="_blank" rel="noopener">source code</a></p><a id="more"></a>
<h2 id="week1-Basic-Data-Structures"><a href="#week1-Basic-Data-Structures" class="headerlink" title="week1.Basic Data Structures"></a>week1.Basic Data Structures</h2><p>basic data strucures主要是关于基本得队列、栈、链表的基本应用，题目还是有一些难度，如果对算法和数据结构不是很熟悉的话，对付<code>homework</code> 还是非常花时间的。</p>
<h3 id="1-1-Check-brackets-in-the-code"><a href="#1-1-Check-brackets-in-the-code" class="headerlink" title="1 1 Check brackets in the code"></a>1 1 Check brackets in the code</h3><p><strong>Input Format</strong>. Input contains one string 𝑆 which consists of big and small latin letters, digits, punctuation marks and brackets from the set []{}().<br><strong>Constraints</strong>. The length of 𝑆 is at least 1 and at most 105.<br><strong>Output Format</strong>. If the code in 𝑆 uses brackets correctly, output “Success” (without the quotes). Otherwise,<br>output the 1-based index of the first unmatched closing bracket, and if there are no unmatched closing<br>brackets, output the 1-based index of the first unmatched opening bracket.</p>
<h4 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h4><blockquote>
<p> 经典的左右括号匹配问题</p>
<h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><ol>
<li>这题非常简单，用栈即可解决。遇到左括号入栈，遇到右括号如果与栈顶匹配，则出栈。<h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Bracket</span> &#123;</span></span><br><span class="line">    Bracket(<span class="keyword">char</span> type, <span class="keyword">int</span> position):</span><br><span class="line">        type(type),</span><br><span class="line">        position(position)</span><br><span class="line">    &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">Matchc</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (type == <span class="string">'['</span> &amp;&amp; c == <span class="string">']'</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (type == <span class="string">'&#123;'</span> &amp;&amp; c == <span class="string">'&#125;'</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (type == <span class="string">'('</span> &amp;&amp; c == <span class="string">')'</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> type;</span><br><span class="line">    <span class="keyword">int</span> position;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> text;</span><br><span class="line">    getline(<span class="built_in">std</span>::<span class="built_in">cin</span>, text);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">stack</span> &lt;Bracket&gt; opening_brackets_stack;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> position = <span class="number">0</span>; position &lt; text.length(); ++position) &#123;</span><br><span class="line">        <span class="keyword">char</span> next = text[position];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (next == <span class="string">'('</span> || next == <span class="string">'['</span> || next == <span class="string">'&#123;'</span>) &#123;</span><br><span class="line">            <span class="comment">// Process opening bracket, write your code here</span></span><br><span class="line">            opening_brackets_stack.push(Bracket(next,position+<span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (next == <span class="string">')'</span> || next == <span class="string">']'</span> || next == <span class="string">'&#125;'</span>) &#123;</span><br><span class="line">            <span class="comment">// Process closing bracket, write your code here</span></span><br><span class="line">            <span class="keyword">if</span>(opening_brackets_stack.empty()||!opening_brackets_stack.top().Matchc(next))&#123;</span><br><span class="line">                <span class="built_in">cout</span>&lt;&lt;position+<span class="number">1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            opening_brackets_stack.pop();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Printing answer, write your code here</span></span><br><span class="line">    <span class="keyword">if</span>(opening_brackets_stack.empty())&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"Success"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;opening_brackets_stack.top().position;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<h3 id="2-Compute-tree-height"><a href="#2-Compute-tree-height" class="headerlink" title="2 Compute tree height"></a>2 Compute tree height</h3><p><strong>Task</strong>. You are given a description of a rooted tree. Your task is to compute and output its height. Recall<br>that the height of a (rooted) tree is the maximum depth of a node, or the maximum distance from a<br>leaf to the root. You are given an arbitrary tree, not necessarily a binary tree.<br><strong>Input Format</strong>. The first line contains the number of nodes 𝑛. The second line contains 𝑛 integer numbers<br>from −1 to 𝑛 − 1 — parents of nodes. If the 𝑖-th one of them (0 ≤ 𝑖 ≤ 𝑛 − 1) is −1, node 𝑖 is the root,<br>otherwise it’s 0-based index of the parent of 𝑖-th node. It is guaranteed that there is exactly one root.<br>It is guaranteed that the input represents a tree.<br><strong>Constraints</strong>. 1 ≤ 𝑛 ≤ 105.<br><strong>Output Format</strong>. Output the height of the tree.</p>
<h4 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h4><p>DFS</p>
<h4 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h4><ol>
<li>经典的利用递归的DFS求数的高度。</li>
<li>用BFS实现也可以，层次遍历即可。<h4 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> defined(__unix__) || defined(__APPLE__)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/resource.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> key;</span><br><span class="line">    Node *parent;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Node *&gt; children;</span><br><span class="line"></span><br><span class="line">    Node() &#123;</span><br><span class="line">      <span class="keyword">this</span>-&gt;parent = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setParent</span><span class="params">(Node *theParent)</span> </span>&#123;</span><br><span class="line">      parent = theParent;</span><br><span class="line">      parent-&gt;children.push_back(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main_with_large_stack_space</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">std</span>::ios_base::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">int</span> n;</span><br><span class="line">  <span class="keyword">int</span> root = <span class="number">0</span>;</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">  <span class="keyword">int</span> max_height = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Node&gt; nodes;</span><br><span class="line">  nodes.resize(n);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> child_index = <span class="number">0</span>; child_index &lt; n; child_index++) &#123;</span><br><span class="line">    <span class="keyword">int</span> parent_index;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; parent_index;</span><br><span class="line">    <span class="keyword">if</span>(parent_index == <span class="number">-1</span>) root = child_index;</span><br><span class="line">    <span class="keyword">if</span> (parent_index &gt;= <span class="number">0</span>)</span><br><span class="line">      nodes[child_index].setParent(&amp;nodes[parent_index]);</span><br><span class="line">    nodes[child_index].key = child_index;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; qu;</span><br><span class="line">  qu.push(root);</span><br><span class="line">  <span class="keyword">while</span>(!qu.empty())&#123;</span><br><span class="line">      <span class="keyword">int</span> sz = qu.size();</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sz; ++i)&#123;</span><br><span class="line">          <span class="keyword">int</span> curr = qu.front();</span><br><span class="line">          qu.pop();</span><br><span class="line"></span><br><span class="line">          <span class="keyword">for</span>(<span class="keyword">auto</span> v : nodes[curr].children)&#123;</span><br><span class="line">              qu.push(v-&gt;key);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      max_height++;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">cout</span>&lt;&lt;max_height&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> defined(__unix__) || defined(__APPLE__)</span></span><br><span class="line">  <span class="comment">// Allow larger stack space</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">rlim_t</span> kStackSize = <span class="number">16</span> * <span class="number">1024</span> * <span class="number">1024</span>;   <span class="comment">// min stack size = 16 MB</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">rlimit</span> <span class="title">rl</span>;</span></span><br><span class="line">  <span class="keyword">int</span> result;</span><br><span class="line"></span><br><span class="line">  result = getrlimit(RLIMIT_STACK, &amp;rl);</span><br><span class="line">  <span class="keyword">if</span> (result == <span class="number">0</span>)</span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">if</span> (rl.rlim_cur &lt; kStackSize)</span><br><span class="line">      &#123;</span><br><span class="line">          rl.rlim_cur = kStackSize;</span><br><span class="line">          result = setrlimit(RLIMIT_STACK, &amp;rl);</span><br><span class="line">          <span class="keyword">if</span> (result != <span class="number">0</span>)</span><br><span class="line">          &#123;</span><br><span class="line">              <span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; <span class="string">"setrlimit returned result = "</span> &lt;&lt; result &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">  <span class="keyword">return</span> main_with_large_stack_space();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="3-Network-packet-processing-simulation"><a href="#3-Network-packet-processing-simulation" class="headerlink" title="3 Network packet processing simulation"></a>3 Network packet processing simulation</h3><p><strong>Task</strong>. You are given a series of incoming network packets, and your task is to simulate their processing.<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Packets arrive <span class="keyword">in</span> some order. For <span class="keyword">each</span> packet <span class="built_in">number</span> 𝑖, you know <span class="keyword">the</span> <span class="built_in">time</span> when <span class="keyword">it</span> arrived 𝐴𝑖 <span class="keyword">and</span> <span class="keyword">the</span></span><br><span class="line"><span class="built_in">time</span> <span class="keyword">it</span> takes <span class="keyword">the</span> processor <span class="built_in">to</span> <span class="built_in">process</span> <span class="keyword">it</span> 𝑃𝑖 (both <span class="keyword">in</span> <span class="built_in">milliseconds</span>). There is only <span class="literal">one</span> processor, <span class="keyword">and</span> <span class="keyword">it</span></span><br><span class="line">processes <span class="keyword">the</span> incoming packets <span class="keyword">in</span> <span class="keyword">the</span> order <span class="keyword">of</span> their arrival. If <span class="keyword">the</span> processor started <span class="built_in">to</span> <span class="built_in">process</span> some</span><br><span class="line">packet, <span class="keyword">it</span> doesn’t interrupt <span class="keyword">or</span> <span class="built_in">stop</span> <span class="keyword">until</span> <span class="keyword">it</span> finishes <span class="keyword">the</span> processing <span class="keyword">of</span> this packet, <span class="keyword">and</span> <span class="keyword">the</span> processing <span class="keyword">of</span></span><br><span class="line">packet 𝑖 takes exactly 𝑃𝑖 <span class="built_in">milliseconds</span>.</span><br><span class="line">The computer processing <span class="keyword">the</span> packets has <span class="keyword">a</span> network buffer <span class="keyword">of</span> fixed size 𝑆. When packets arrive,</span><br><span class="line">they are stored <span class="keyword">in</span> <span class="keyword">the</span> buffer <span class="keyword">before</span> being processed. However, <span class="keyword">if</span> <span class="keyword">the</span> buffer is full when <span class="keyword">a</span> packet</span><br><span class="line">arrives (there are 𝑆 packets which have arrived <span class="keyword">before</span> this packet, <span class="keyword">and</span> <span class="keyword">the</span> computer hasn’t finished</span><br><span class="line">processing <span class="keyword">any</span> <span class="keyword">of</span> them), <span class="keyword">it</span> is dropped <span class="keyword">and</span> won’t be processed <span class="keyword">at</span> all. If several packets arrive <span class="keyword">at</span> <span class="keyword">the</span></span><br><span class="line">same <span class="built_in">time</span>, they are <span class="keyword">first</span> all stored <span class="keyword">in</span> <span class="keyword">the</span> buffer (some <span class="keyword">of</span> them may be dropped because <span class="keyword">of</span> that —</span><br><span class="line">those which are described later <span class="keyword">in</span> <span class="keyword">the</span> input). The computer processes <span class="keyword">the</span> packets <span class="keyword">in</span> <span class="keyword">the</span> order <span class="keyword">of</span></span><br><span class="line">their arrival, <span class="keyword">and</span> <span class="keyword">it</span> starts processing <span class="keyword">the</span> next available packet <span class="built_in">from</span> <span class="keyword">the</span> buffer <span class="keyword">as</span> soon <span class="keyword">as</span> <span class="keyword">it</span> finishes</span><br><span class="line">processing <span class="keyword">the</span> previous <span class="literal">one</span>. If <span class="keyword">at</span> some point <span class="keyword">the</span> computer is <span class="keyword">not</span> busy, <span class="keyword">and</span> there are no packets <span class="keyword">in</span></span><br><span class="line"><span class="keyword">the</span> buffer, <span class="keyword">the</span> computer just waits <span class="keyword">for</span> <span class="keyword">the</span> next packet <span class="built_in">to</span> arrive. Note that <span class="keyword">a</span> packet leaves <span class="keyword">the</span> buffer</span><br><span class="line"><span class="keyword">and</span> frees <span class="keyword">the</span> <span class="literal">space</span> <span class="keyword">in</span> <span class="keyword">the</span> buffer <span class="keyword">as</span> soon <span class="keyword">as</span> <span class="keyword">the</span> computer finishes processing <span class="keyword">it</span>.</span><br></pre></td></tr></table></figure><br><strong>Input Format</strong>. The first line of the input contains the size 𝑆 of the buffer and the number 𝑛 of incoming<br>network packets. Each of the next 𝑛 lines contains two numbers. 𝑖-th line contains the time of arrival<br>𝐴𝑖 and the processing time 𝑃𝑖 (both in milliseconds) of the 𝑖-th packet. It is guaranteed that the<br>sequence of arrival times is non-decreasing (however, it can contain the exact same times of arrival in<br>milliseconds — in this case the packet which is earlier in the input is considered to have arrived earlier).<br><strong>Constraints</strong>. All the numbers in the input are integers. 1 ≤ 𝑆 ≤ 105; 0 ≤ 𝑛 ≤ 105; 0 ≤ 𝐴𝑖 ≤ 106;<br>0 ≤ 𝑃𝑖 ≤ 103; 𝐴𝑖 ≤ 𝐴𝑖+1 for 1 ≤ 𝑖 ≤ 𝑛 − 1.<br><strong>Output Format</strong>. For each packet output either the moment of time (in milliseconds) when the processor<br>began processing it or −1 if the packet was dropped (output the answers for the packets in the same<br>order as the packets are given in the input).</p>
<h4 id="题意-2"><a href="#题意-2" class="headerlink" title="题意"></a>题意</h4><p>队列</p>
<h4 id="思路-2"><a href="#思路-2" class="headerlink" title="思路"></a>思路</h4><ol>
<li>如果当前队列为空，则直接将当前的packet入队列，同时给出response。</li>
<li>如果当前队列不为空，则将所有处理时间小于当前达到时间的packet全部出队列。这时判断队列中缓存的packet数目是否达到最大长度，如果达到最大长度上线，则将当前到达的packet丢弃，否则直接入队列。</li>
<li>题目还是有点意思，稍微用点技巧，非常适合面试。</li>
</ol>
<h4 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Request</span> &#123;</span></span><br><span class="line">    Request(<span class="keyword">int</span> arrival_time, <span class="keyword">int</span> process_time):</span><br><span class="line">        arrival_time(arrival_time),</span><br><span class="line">        process_time(process_time)</span><br><span class="line">    &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> arrival_time;</span><br><span class="line">    <span class="keyword">int</span> process_time;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Response</span> &#123;</span></span><br><span class="line">    Response(<span class="keyword">bool</span> dropped, <span class="keyword">int</span> start_time):</span><br><span class="line">        dropped(dropped),</span><br><span class="line">        start_time(start_time)</span><br><span class="line">    &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">bool</span> dropped;</span><br><span class="line">    <span class="keyword">int</span> start_time;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Buffer</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Buffer(<span class="keyword">int</span> size):</span><br><span class="line">        size_(size),</span><br><span class="line">        finish_time_()</span><br><span class="line">    &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Response <span class="title">Process</span><span class="params">(<span class="keyword">const</span> Request &amp;request)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// write your code here</span></span><br><span class="line">        <span class="keyword">int</span> arrive = request.arrival_time;</span><br><span class="line">        <span class="keyword">int</span> process = request.process_time;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(!finish_time_.empty() &amp;&amp; arrive &gt;= finish_time_.front())&#123;</span><br><span class="line">            finish_time_.pop_front();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(finish_time_.empty())&#123;</span><br><span class="line">            finish_time_.push_back(arrive + process);            </span><br><span class="line">            <span class="keyword">return</span> Response(<span class="literal">false</span>,arrive);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(finish_time_.size() == size_)&#123;</span><br><span class="line">                <span class="keyword">return</span> Response(<span class="literal">true</span>,arrive);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">int</span> last = finish_time_.back();</span><br><span class="line">                finish_time_.push_back(last + process);</span><br><span class="line">                <span class="keyword">return</span> Response(<span class="literal">false</span>,last);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> size_;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">deque</span> &lt;<span class="keyword">int</span>&gt; finish_time_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span> &lt;Request&gt; ReadRequests() &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span> &lt;Request&gt; requests;</span><br><span class="line">    <span class="keyword">int</span> count;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; count;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> arrival_time, process_time;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; arrival_time &gt;&gt; process_time;</span><br><span class="line">        requests.push_back(Request(arrival_time, process_time));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> requests;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span> &lt;Response&gt; ProcessRequests(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span> &lt;Request&gt; &amp;requests, Buffer *buffer) &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span> &lt;Response&gt; responses;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; requests.size(); ++i)</span><br><span class="line">        responses.push_back(buffer-&gt;Process(requests[i]));</span><br><span class="line">    <span class="keyword">return</span> responses;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintResponses</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span> &lt;Response&gt; &amp;responses)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; responses.size(); ++i)</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; (responses[i].dropped ? <span class="number">-1</span> : responses[i].start_time) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> size;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; size;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span> &lt;Request&gt; requests = ReadRequests();</span><br><span class="line"></span><br><span class="line">    <span class="function">Buffer <span class="title">buffer</span><span class="params">(size)</span></span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span> &lt;Response&gt; responses = ProcessRequests(requests, &amp;buffer);</span><br><span class="line"></span><br><span class="line">    PrintResponses(responses);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-Extending-stack-interface"><a href="#4-Extending-stack-interface" class="headerlink" title="4 Extending stack interface"></a>4 Extending stack interface</h3><p><strong>Task</strong>. Implement a stack supporting the operations Push(), Pop(), and Max().<br><strong>Input Format</strong>. The first line of the input contains the number 𝑞 of queries. Each of the following 𝑞 lines<br>specifies a query of one of the following formats: push v, pop, or max.<br><strong>Constraints</strong>. 1 ≤ 𝑞 ≤ 400 000, 0 ≤ 𝑣 ≤ 105.<br><strong>Output Format</strong>. For each max query, output (on a separate line) the maximum value of the stack.</p>
<h4 id="题意-3"><a href="#题意-3" class="headerlink" title="题意"></a>题意</h4><p>经典的最大栈，最小栈的问题</p>
<h4 id="思路-3"><a href="#思路-3" class="headerlink" title="思路"></a>思路</h4><ol>
<li>经典的最大栈和最小栈问题，不用再详细描述了。<h4 id="代码-3"><a href="#代码-3" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::max_element;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StackWithMax</span> &#123;</span></span><br><span class="line">  <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="built_in">stack</span>;</span><br><span class="line">  <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; maxElement;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Push</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">stack</span>.push_back(value);</span><br><span class="line">        <span class="keyword">if</span>(maxElement.empty())&#123;</span><br><span class="line">            maxElement.push_back(value);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(maxElement.back() &lt; value)&#123;</span><br><span class="line">                maxElement.push_back(value);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                maxElement.push_back(maxElement.back());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        assert(<span class="built_in">stack</span>.size());</span><br><span class="line">        <span class="built_in">stack</span>.pop_back();</span><br><span class="line">        maxElement.pop_back();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">Max</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        assert(<span class="built_in">stack</span>.size());</span><br><span class="line">        <span class="keyword">return</span> maxElement.back();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num_queries = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; num_queries;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">string</span> query;</span><br><span class="line">    <span class="built_in">string</span> value;</span><br><span class="line"></span><br><span class="line">    StackWithMax <span class="built_in">stack</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num_queries; ++i) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; query;</span><br><span class="line">        <span class="keyword">if</span> (query == <span class="string">"push"</span>) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; value;</span><br><span class="line">            <span class="built_in">stack</span>.Push(<span class="built_in">std</span>::stoi(value));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (query == <span class="string">"pop"</span>) &#123;</span><br><span class="line">            <span class="built_in">stack</span>.Pop();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (query == <span class="string">"max"</span>) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="built_in">stack</span>.Max() &lt;&lt; <span class="string">"\n"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            assert(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="5-Maximum-in-Sliding-Window"><a href="#5-Maximum-in-Sliding-Window" class="headerlink" title="5 Maximum in Sliding Window"></a>5 Maximum in Sliding Window</h3><p><strong>Input Format</strong>. The first line contains an integer 𝑛, the second line contains 𝑛 integers 𝑎1, . . . , 𝑎𝑛 separated by spaces, the third line contains an integer 𝑚.<br><strong>Constraints</strong>. 1 ≤ 𝑛 ≤ 105, 1 ≤ 𝑚 ≤ 𝑛, 0 ≤ 𝑎𝑖 ≤ 105 for all 1 ≤ 𝑖 ≤ 𝑛.<br><strong>Output Format</strong>. Output max{𝑎𝑖, . . . , 𝑎𝑖+𝑚−1} for every 1 ≤ 𝑖 ≤ 𝑛 − 𝑚 + 1.</p>
<h4 id="题意-4"><a href="#题意-4" class="headerlink" title="题意"></a>题意</h4><p>滑动窗口</p>
<h4 id="思路-4"><a href="#思路-4" class="headerlink" title="思路"></a>思路</h4><ol>
<li>滑动窗口的最大值问题。<h4 id="代码-4"><a href="#代码-4" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; pii;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> pii &amp; a,<span class="keyword">const</span> pii &amp; b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a.second &lt; b.second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">max_sliding_window_naive</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="keyword">const</span> &amp; A, <span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">deque</span>&lt;pii&gt; qu;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A.size(); ++i)&#123;</span><br><span class="line">        <span class="keyword">if</span>(qu.empty())&#123;</span><br><span class="line">            qu.push_back(make_pair(i,A[i]));</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">while</span>(!qu.empty() &amp;&amp; A[i] &gt;= qu.back().second)&#123;</span><br><span class="line">                qu.pop_back();</span><br><span class="line">            &#125;</span><br><span class="line">            qu.push_back(make_pair(i,A[i]));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(i &gt;= w - <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;qu.front().second&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">            <span class="keyword">if</span>(qu.front().first &lt;= i - w + <span class="number">1</span>)&#123;</span><br><span class="line">                qu.pop_front();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; A(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; A.at(i);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> w = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; w;</span><br><span class="line"></span><br><span class="line">    max_sliding_window_naive(A, w);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="week2-Priority-Queues-and-Disjoint-Sets"><a href="#week2-Priority-Queues-and-Disjoint-Sets" class="headerlink" title="week2. Priority Queues and Disjoint Sets"></a>week2. Priority Queues and Disjoint Sets</h2><h3 id="1-Convert-array-into-heap"><a href="#1-Convert-array-into-heap" class="headerlink" title="1 Convert array into heap"></a>1 Convert array into heap</h3><p><strong>Task</strong>. The first step of the HeapSort algorithm is to create a heap from the array you want to sort. By the<br>way, did you know that algorithms based on Heaps are widely used for external sort, when you need<br>to sort huge files that don’t fit into memory of a computer?<br>Your task is to implement this first step and convert a given array of integers into a heap. You will<br>do that by applying a certain number of swaps to the array. Swap is an operation which exchanges<br>elements 𝑎𝑖 and 𝑎𝑗 of the array 𝑎 for some 𝑖 and 𝑗. You will need to convert the array into a heap using<br>only 𝑂(𝑛) swaps, as was described in the lectures. Note that you will need to use a min-heap instead<br>of a max-heap in this problem.<br><strong>Input Format</strong>. The first line of the input contains single integer 𝑛. The next line contains 𝑛 space-separated<br>integers 𝑎𝑖.<br><strong>Constraints</strong>. 1 ≤ 𝑛 ≤ 100 000; 0 ≤ 𝑖, 𝑗 ≤ 𝑛 − 1; 0 ≤ 𝑎0, 𝑎1, . . . , 𝑎𝑛−1 ≤ 109. All 𝑎𝑖 are distinct.<br><strong>Output Format</strong>. The first line of the output should contain single integer 𝑚 — the total number of swaps.<br>𝑚 must satisfy conditions 0 ≤ 𝑚 ≤ 4𝑛. The next 𝑚 lines should contain the swap operations used<br>to convert the array 𝑎 into a heap. Each swap is described by a pair of integers 𝑖, 𝑗 — the 0-based<br>indices of the elements to be swapped. After applying all the swaps in the specified order the array<br>must become a heap, that is, for each 𝑖 where 0 ≤ 𝑖 ≤ 𝑛 − 1 the following conditions must be true:</p>
<ul>
<li><ol>
<li>If 2𝑖 + 1 ≤ 𝑛 − 1, then 𝑎𝑖 &lt; 𝑎2𝑖+1.</li>
</ol>
</li>
<li><ol>
<li>If 2𝑖 + 2 ≤ 𝑛 − 1, then 𝑎𝑖 &lt; 𝑎2𝑖+2.<br>Note that all the elements of the input array are distinct. Note that any sequence of swaps that has<br>length at most 4𝑛 and after which your initial array becomes a correct heap will be graded as correct.</li>
</ol>
</li>
</ul>
<h4 id="题意-5"><a href="#题意-5" class="headerlink" title="题意"></a>题意</h4><p>经典的堆栈建立过程</p>
<h4 id="思路-5"><a href="#思路-5" class="headerlink" title="思路"></a>思路</h4><ol>
<li>此题考察堆的调整过程。经典的堆的建立过程，时间复杂度为:<script type="math/tex; mode=display">
T(n) = O(\lg{\frac{n}{2}}) + O(\lg{\frac{n}{4}}) + ... = lg{n}</script><h4 id="代码-5"><a href="#代码-5" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::swap;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::pair;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::make_pair;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HeapBuilder</span> &#123;</span></span><br><span class="line"> <span class="keyword">private</span>:</span><br><span class="line">  <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; data_;</span><br><span class="line">  <span class="built_in">vector</span>&lt; pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; swaps_;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">WriteResponse</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; swaps_.size() &lt;&lt; <span class="string">"\n"</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; swaps_.size(); ++i) &#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; swaps_[i].first &lt;&lt; <span class="string">" "</span> &lt;&lt; swaps_[i].second &lt;&lt; <span class="string">"\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">ReadData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    data_.resize(n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">      <span class="built_in">cin</span> &gt;&gt; data_[i];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">GenerateSwaps</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    swaps_.clear();</span><br><span class="line">    <span class="comment">// The following naive implementation just sorts </span></span><br><span class="line">    <span class="comment">// the given sequence using selection sort algorithm</span></span><br><span class="line">    <span class="comment">// and saves the resulting sequence of swaps.</span></span><br><span class="line">    <span class="comment">// This turns the given array into a heap, </span></span><br><span class="line">    <span class="comment">// but in the worst case gives a quadratic number of swaps.</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> replace by a more efficient implementation</span></span><br><span class="line">    <span class="keyword">int</span> n = data_.size();</span><br><span class="line">    <span class="keyword">int</span> m = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = (n<span class="number">-2</span>)/<span class="number">2</span>; i &gt;= <span class="number">0</span>; --i)&#123;</span><br><span class="line">        <span class="keyword">int</span> j = i;</span><br><span class="line">        <span class="keyword">while</span>(j*<span class="number">2</span> &lt;= n)&#123;</span><br><span class="line">            <span class="keyword">int</span> l = j*<span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> r = j*<span class="number">2</span> + <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(l &lt; n ) m = l;</span><br><span class="line">            <span class="keyword">if</span>(r &lt; n &amp;&amp; data_[r] &lt; data_[m]) m = r;</span><br><span class="line">            <span class="keyword">if</span>(data_[j] &gt; data_[m])&#123;</span><br><span class="line">                swaps_.push_back(make_pair(j,m));</span><br><span class="line">                swap(data_[j],data_[m]);</span><br><span class="line">                j = m;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">Solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ReadData();</span><br><span class="line">    GenerateSwaps();</span><br><span class="line">    WriteResponse();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">std</span>::ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">  HeapBuilder heap_builder;</span><br><span class="line">  heap_builder.Solve();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="2-Parallel-processing"><a href="#2-Parallel-processing" class="headerlink" title="2 Parallel processing"></a>2 Parallel processing</h3><p><strong>Task</strong>. You have a program which is parallelized and uses 𝑛 independent threads to process the given list of 𝑚<br>jobs. Threads take jobs in the order they are given in the input. If there is a free thread, it immediately<br>takes the next job from the list. If a thread has started processing a job, it doesn’t interrupt or stop<br>until it finishes processing the job. If several threads try to take jobs from the list simultaneously, the<br>thread with smaller index takes the job. For each job you know exactly how long will it take any thread<br>to process this job, and this time is the same for all the threads. You need to determine for each job<br>which thread will process it and when will it start processing.<br><strong>Input Format</strong>. The first line of the input contains integers 𝑛 and 𝑚.<br>The second line contains 𝑚 integers 𝑡𝑖 — the times in seconds it takes any thread to process 𝑖-th job.<br>The times are given in the same order as they are in the list from which threads take jobs.<br>Threads are indexed starting from 0.<br><strong>Constraints</strong>. 1 ≤ 𝑛 ≤ 105; 1 ≤ 𝑚 ≤ 105; 0 ≤ 𝑡𝑖 ≤ 109.<br><strong>Output Format</strong>. Output exactly 𝑚 lines. 𝑖-th line (0-based index is used) should contain two spaceseparated<br>integers — the 0-based index of the thread which will process the 𝑖-th job and the time<br>in seconds when it will start processing that job.</p>
<h4 id="题意-6"><a href="#题意-6" class="headerlink" title="题意"></a>题意</h4><p>优先级队列</p>
<h4 id="思路-6"><a href="#思路-6" class="headerlink" title="思路"></a>思路</h4><ol>
<li>将所有worker的空闲时间压入优先级队列，按照空闲时间的起始先后进行排列。</li>
<li>我们每次分配任务时，从队列中取出最先出现空闲时间的<code>worker</code>，让其处理本次的<code>job</code>，处理完成后，同时将该<code>worker</code>的下次空闲时间入队列。</li>
<li>题目的难度适中，非常适合面试考试题目，我觉得能够讲出思路非常不错的题目。<h4 id="代码-6"><a href="#代码-6" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">long</span> <span class="keyword">long</span>,<span class="keyword">long</span> <span class="keyword">long</span>&gt; pii;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">cmp</span>&#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(pii &amp; a,pii &amp; b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(a.second == b.second)&#123;</span><br><span class="line">            <span class="keyword">return</span> a.first &gt; b.first;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> a.second &gt; b.second;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JobQueue</span> &#123;</span></span><br><span class="line"> <span class="keyword">private</span>:</span><br><span class="line">  <span class="keyword">int</span> num_workers_;</span><br><span class="line">  <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; jobs_;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; assigned_workers_;</span><br><span class="line">  <span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; start_times_;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">WriteResponse</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; jobs_.size(); ++i) &#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; assigned_workers_[i] &lt;&lt; <span class="string">" "</span> &lt;&lt; start_times_[i] &lt;&lt; <span class="string">"\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">ReadData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; num_workers_ &gt;&gt; m;</span><br><span class="line">    jobs_.resize(m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i)</span><br><span class="line">      <span class="built_in">cin</span> &gt;&gt; jobs_[i];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">AssignJobs</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> replace this code with a faster algorithm.</span></span><br><span class="line">    assigned_workers_.resize(jobs_.size());</span><br><span class="line">    start_times_.resize(jobs_.size());</span><br><span class="line">    priority_queue&lt;pii,<span class="built_in">vector</span>&lt;pii&gt;,cmp&gt; pq;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num_workers_; ++i)&#123;</span><br><span class="line">        pq.push(make_pair(i,<span class="number">0</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; jobs_.size(); ++i) &#123;</span><br><span class="line">        pii curr = pq.top();</span><br><span class="line">        pq.pop();</span><br><span class="line">        assigned_workers_[i] = curr.first;</span><br><span class="line">        start_times_[i] = curr.second;</span><br><span class="line">        curr.second += jobs_[i];</span><br><span class="line">        pq.push(curr);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">Solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ReadData();</span><br><span class="line">    AssignJobs();</span><br><span class="line">    WriteResponse();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">std</span>::ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">  JobQueue job_queue;</span><br><span class="line">  job_queue.Solve();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="3-Merging-tables"><a href="#3-Merging-tables" class="headerlink" title="3 Merging tables"></a>3 Merging tables</h3><p><strong>Task</strong>. There are 𝑛 tables stored in some database. The tables are numbered from 1 to 𝑛. All tables share<br>the same set of columns. Each table contains either several rows with real data or a symbolic link to<br>another table. Initially, all tables contain data, and 𝑖-th table has 𝑟𝑖 rows. You need to perform 𝑚 of<br>the following operations:</p>
<ul>
<li><ol>
<li>Consider table number 𝑑𝑒𝑠𝑡𝑖𝑛𝑎𝑡𝑖𝑜𝑛𝑖. Traverse the path of symbolic links to get to the data. That is,<br>while 𝑑𝑒𝑠𝑡𝑖𝑛𝑎𝑡𝑖𝑜𝑛𝑖 contains a symbolic link instead of real data do<br>𝑑𝑒𝑠𝑡𝑖𝑛𝑎𝑡𝑖𝑜𝑛𝑖 ← symlink(𝑑𝑒𝑠𝑡𝑖𝑛𝑎𝑡𝑖𝑜𝑛𝑖)</li>
</ol>
</li>
<li><ol>
<li>Consider the table number 𝑠𝑜𝑢𝑟𝑐𝑒𝑖 and traverse the path of symbolic links from it in the same<br>manner as for 𝑑𝑒𝑠𝑡𝑖𝑛𝑎𝑡𝑖𝑜𝑛𝑖.</li>
</ol>
</li>
<li><ol>
<li>Now, 𝑑𝑒𝑠𝑡𝑖𝑛𝑎𝑡𝑖𝑜𝑛𝑖 and 𝑠𝑜𝑢𝑟𝑐𝑒𝑖 are the numbers of two tables with real data. If 𝑑𝑒𝑠𝑡𝑖𝑛𝑎𝑡𝑖𝑜𝑛𝑖 ̸=<br>𝑠𝑜𝑢𝑟𝑐𝑒𝑖, copy all the rows from table 𝑠𝑜𝑢𝑟𝑐𝑒𝑖 to table 𝑑𝑒𝑠𝑡𝑖𝑛𝑎𝑡𝑖𝑜𝑛𝑖, then clear the table 𝑠𝑜𝑢𝑟𝑐𝑒𝑖<br>and instead of real data put a symbolic link to 𝑑𝑒𝑠𝑡𝑖𝑛𝑎𝑡𝑖𝑜𝑛𝑖 into it.</li>
</ol>
</li>
<li><ol>
<li>Print the maximum size among all 𝑛 tables (recall that size is the number of rows in the table).<br>If the table contains only a symbolic link, its size is considered to be 0.<br>See examples and explanations for further clarifications.</li>
</ol>
</li>
</ul>
<p><strong>Input Format</strong>. The first line of the input contains two integers 𝑛 and 𝑚 — the number of tables in the<br>database and the number of merge queries to perform, respectively.<br>The second line of the input contains 𝑛 integers 𝑟𝑖 — the number of rows in the 𝑖-th table.<br>Then follow 𝑚 lines describing merge queries. Each of them contains two integers 𝑑𝑒𝑠𝑡𝑖𝑛𝑎𝑡𝑖𝑜𝑛𝑖 and<br>𝑠𝑜𝑢𝑟𝑐𝑒𝑖 — the numbers of the tables to merge.<br><strong>Constraints</strong>. 1 ≤ 𝑛,𝑚 ≤ 100 000; 0 ≤ 𝑟𝑖 ≤ 10 000; 1 ≤ 𝑑𝑒𝑠𝑡𝑖𝑛𝑎𝑡𝑖𝑜𝑛𝑖, 𝑠𝑜𝑢𝑟𝑐𝑒𝑖 ≤ 𝑛.<br><strong>Output Format</strong>. For each query print a line containing a single integer — the maximum of the sizes of all<br>tables (in terms of the number of rows) after the corresponding operation.</p>
<h4 id="题意-7"><a href="#题意-7" class="headerlink" title="题意"></a>题意</h4><p>带权重的并查集</p>
<h4 id="思路-7"><a href="#思路-7" class="headerlink" title="思路"></a>思路</h4><ol>
<li>经典的带权重的并查集，记住DSU合并的权重有几种计算方式，一种是按照<code>size</code>，另一种是按照<code>height</code>。</li>
<li>按照<code>size</code>为权重来进行集合合并时，惯例为才会将<code>size</code>小的集合合并到<code>size</code>集合中。</li>
<li>按照<code>height</code>为权重来进行集合合并时，惯例为才会将<code>height</code>小的集合合并到<code>height</code>大的集合中<h4 id="代码-7"><a href="#代码-7" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::max;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">DisjointSetsElement</span> &#123;</span></span><br><span class="line">	<span class="keyword">int</span> size, parent, rank;</span><br><span class="line">	</span><br><span class="line">	DisjointSetsElement(<span class="keyword">int</span> size = <span class="number">0</span>, <span class="keyword">int</span> parent = <span class="number">-1</span>, <span class="keyword">int</span> rank = <span class="number">0</span>):</span><br><span class="line">	    size(size), parent(parent), rank(rank) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">DisjointSets</span> &#123;</span></span><br><span class="line">	<span class="keyword">int</span> size;</span><br><span class="line">	<span class="keyword">int</span> max_table_size;</span><br><span class="line">	<span class="built_in">vector</span> &lt;DisjointSetsElement&gt; sets;</span><br><span class="line"></span><br><span class="line">	DisjointSets(<span class="keyword">int</span> size): size(size), max_table_size(<span class="number">0</span>), sets(size) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">			sets[i].parent = i;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">getParent</span><span class="params">(<span class="keyword">int</span> table)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// find parent and compress path</span></span><br><span class="line">		<span class="keyword">while</span>(sets[table].parent != table)&#123;</span><br><span class="line">			table = sets[table].parent;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> table;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> destination, <span class="keyword">int</span> source)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> realDestination = getParent(destination);</span><br><span class="line">		<span class="keyword">int</span> realSource = getParent(source);</span><br><span class="line">		<span class="keyword">if</span> (realDestination != realSource) &#123;</span><br><span class="line">			<span class="comment">// merge two components</span></span><br><span class="line">			<span class="comment">// use union by rank heuristic</span></span><br><span class="line">            <span class="comment">// update max_table_size</span></span><br><span class="line">			<span class="keyword">if</span>(sets[realDestination].rank &gt; sets[realSource].rank)&#123;</span><br><span class="line">				sets[realDestination].size += sets[realSource].size;</span><br><span class="line">				sets[realSource].parent = realDestination;</span><br><span class="line">				max_table_size = max(max_table_size,sets[realDestination].size);</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				sets[realDestination].parent = realSource;</span><br><span class="line">				sets[realSource].size += sets[realDestination].size;</span><br><span class="line">				max_table_size = max(max_table_size,sets[realSource].size);</span><br><span class="line">				<span class="keyword">if</span>(sets[realDestination].rank == sets[realSource].rank)&#123;</span><br><span class="line">					sets[realSource].rank = sets[realDestination].rank  + <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n, m;</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line"></span><br><span class="line">	<span class="function">DisjointSets <span class="title">tables</span><span class="params">(n)</span></span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> &amp;table : tables.sets) &#123;</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; table.size;</span><br><span class="line">		tables.max_table_size = max(tables.max_table_size, table.size);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">		<span class="keyword">int</span> destination, source;</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; destination &gt;&gt; source;</span><br><span class="line">                --destination;</span><br><span class="line">                --source;</span><br><span class="line">		</span><br><span class="line">		tables.merge(destination, source);</span><br><span class="line">	        <span class="built_in">cout</span> &lt;&lt; tables.max_table_size &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="week3-Hash-Tables-and-Hash-Functions"><a href="#week3-Hash-Tables-and-Hash-Functions" class="headerlink" title="week3: Hash Tables and Hash Functions"></a>week3: Hash Tables and Hash Functions</h2><p>这一章主要是讲kmp算法和KR算法。有几道题目非常的经典和难，必须要掌握该算法的本质。前两道题目比较简单，就不在这里展开描述，后面三道题题目还是经典的面试题。</p>
<h3 id="3-Find-pattern-in-text"><a href="#3-Find-pattern-in-text" class="headerlink" title="3 Find pattern in text"></a>3 Find pattern in text</h3><ul>
<li><strong>Task</strong>. In this problem your goal is to implement the Rabin–Karp’s algorithm for searching the given pattern<br>in the given text.</li>
<li><strong>Input Format</strong>. There are two strings in the input: the pattern 𝑃 and the text 𝑇.<br>Constraints. 1 ≤ |𝑃| ≤ |𝑇| ≤ 5 · 105. The total length of all occurrences of 𝑃 in 𝑇 doesn’t exceed 108. The<br>pattern and the text contain only latin letters.</li>
<li><strong>Output Format</strong>. Print all the positions of the occurrences of 𝑃 in 𝑇 in the ascending order. Use 0-based<br>indexing of positions in the the text 𝑇.𝐺𝑒𝑛𝑜𝑚𝑒.<h4 id="题意-8"><a href="#题意-8" class="headerlink" title="题意"></a>题意</h4>KMP算法或者KR算法。<h4 id="思路-8"><a href="#思路-8" class="headerlink" title="思路"></a>思路</h4></li>
</ul>
<ol>
<li>在这里还是使用KR算法，其实这个算法如果理解10进制数的本质，就知道这个算法的本质含义，与我们所经常用的数位算法一样。<h4 id="代码-8"><a href="#代码-8" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ull;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Data</span> &#123;</span></span><br><span class="line">    <span class="built_in">string</span> pattern, text;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">Data <span class="title">read_input</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Data data;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; data.pattern &gt;&gt; data.text;</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_occurrences</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; output)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; output.size(); ++i)</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; output[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; get_occurrences(<span class="keyword">const</span> Data&amp; input) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">string</span>&amp; s = input.pattern, t = input.text;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line">    <span class="keyword">int</span> n = t.size();</span><br><span class="line">    <span class="keyword">int</span> m = s.size();</span><br><span class="line">    <span class="keyword">int</span> base = <span class="number">263</span>;</span><br><span class="line">    <span class="keyword">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> h = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> b = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> h1 = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(n &lt; m) <span class="keyword">return</span> ans;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i)&#123;</span><br><span class="line">        h = (h*base + s[i])%mod;</span><br><span class="line">        h1 = (h1*base + t[i])%mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m<span class="number">-1</span>; ++i)&#123;</span><br><span class="line">        b = (b*base)%mod;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(h == h1) ans.push_back(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n - m; ++i)&#123;</span><br><span class="line">        h1 = (h1 - t[i<span class="number">-1</span>]*b%mod + mod)%mod;</span><br><span class="line">        h1 = (h1*base + t[i+m<span class="number">-1</span>])%mod;</span><br><span class="line">        <span class="keyword">if</span>(h1 == h)&#123;</span><br><span class="line">            ans.push_back(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    print_occurrences(get_occurrences(read_input()));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="4-Substring-equality"><a href="#4-Substring-equality" class="headerlink" title="4 Substring equality"></a>4 Substring equality</h3><ul>
<li><strong>Input Format</strong>. The first line contains a string 𝑠 consisting of small Latin letters. The second line contains<br>the number of queries 𝑞. Each of the next 𝑞 lines specifies a query by three integers 𝑎, 𝑏, and 𝑙.</li>
<li><strong>Constraints</strong>. 1 ≤ |𝑠| ≤ 500 000. 1 ≤ 𝑞 ≤ 100 000. 0 ≤ 𝑎, 𝑏 ≤ |𝑠| − 𝑙 (hence the indices 𝑎 and 𝑏 are 0-based).</li>
<li><strong>Output Format</strong>. For each query, output “Yes” if 𝑠𝑎𝑠𝑎+1. . .𝑠𝑎+𝑙−1 = 𝑠𝑏𝑠𝑏+1. . .𝑠𝑏+𝑙−1 are equal, and “No”<br>otherwise.<h4 id="思路-9"><a href="#思路-9" class="headerlink" title="思路"></a>思路</h4></li>
</ul>
<ol>
<li>典型的KR算法。</li>
<li>算出所有长度的hash值，比较hash值是否相等。<h4 id><a href="#" class="headerlink" title=" "></a> </h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solver</span> &#123;</span></span><br><span class="line">	<span class="built_in">string</span> s;</span><br><span class="line">	<span class="keyword">int</span> base;</span><br><span class="line">	<span class="keyword">int</span> mod;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; hx;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; bx;</span><br><span class="line"><span class="keyword">public</span>:	</span><br><span class="line">	Solver(<span class="built_in">string</span> s) : s(s) &#123;	</span><br><span class="line">		<span class="comment">// initialization, precalculation</span></span><br><span class="line">		<span class="keyword">int</span> n = s.size();</span><br><span class="line">		<span class="keyword">this</span>-&gt;base = <span class="number">263</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;hx = <span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt;(n+<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">		<span class="keyword">this</span>-&gt;bx = <span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt;(n+<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)&#123;</span><br><span class="line">			hx[i] = (hx[i<span class="number">-1</span>]*base + s[i<span class="number">-1</span>])%mod;</span><br><span class="line">			bx[i] = (bx[i<span class="number">-1</span>]*base)%mod;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">ask</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> l)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">long</span> <span class="keyword">long</span> h1 = (hx[a+l] - hx[a]*bx[l]%mod + mod)%mod;</span><br><span class="line">		<span class="keyword">long</span> <span class="keyword">long</span> h2 = (hx[b+l] - hx[b]*bx[l]%mod + mod)%mod;</span><br><span class="line">		<span class="keyword">if</span>(h1 == h2) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	ios_base::sync_with_stdio(<span class="number">0</span>), <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">string</span> s;</span><br><span class="line">	<span class="keyword">int</span> q;</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; s &gt;&gt; q;</span><br><span class="line">	<span class="function">Solver <span class="title">solver</span><span class="params">(s)</span></span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; q; i++) &#123;</span><br><span class="line">		<span class="keyword">int</span> a, b, l;</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b &gt;&gt; l;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; (solver.ask(a, b, l) ? <span class="string">"Yes\n"</span> : <span class="string">"No\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="5-Longest-common-substring"><a href="#5-Longest-common-substring" class="headerlink" title="5 Longest common substring"></a>5 Longest common substring</h3><p><strong>Input Format</strong>. Every line of the input contains two strings 𝑠 and 𝑡 consisting of lower case Latin letters.<br><strong>Constraints</strong>. The total length of all 𝑠’s as well as the total length of all 𝑡’s does not exceed 100 000.<br><strong>Output Format</strong>. For each pair of strings 𝑠 and 𝑡𝑖, find its longest common substring and specify it by<br>outputting three integers: its starting position in 𝑠, its starting position in 𝑡 (both 0-based), and its<br>length. More formally, output integers 0 ≤ 𝑖 &lt; |𝑠|, 0 ≤ 𝑗 &lt; |𝑡|, and 𝑙 ≥ 0 such that 𝑠𝑖𝑠𝑖+1 · · · 𝑠𝑖+𝑙−1 =<br>𝑡𝑗 𝑡𝑗+1 · · · 𝑡𝑗+𝑙−1 and 𝑙 is maximal. (As usual, if there are many such triples with maximal 𝑙, output any<br>of them.)</p>
<h4 id="题意-9"><a href="#题意-9" class="headerlink" title="题意"></a>题意</h4><p>KR算法</p>
<h4 id="思路-10"><a href="#思路-10" class="headerlink" title="思路"></a>思路</h4><ol>
<li>leetcode周赛的原题，如果知道这个算法的，就知道这个题目非常简单，不知道该算法的就觉得非常难。或者后缀数组也可以实现该算法。<h4 id="代码-9"><a href="#代码-9" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Answer</span> &#123;</span></span><br><span class="line">	<span class="keyword">size_t</span> i, j, len;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">Answer <span class="title">solve</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;s, <span class="keyword">const</span> <span class="built_in">string</span> &amp;t)</span> </span>&#123;</span><br><span class="line">	Answer ans = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line">	<span class="keyword">int</span> m = s.size();</span><br><span class="line">	<span class="keyword">int</span> n = t.size();</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> base1 = <span class="number">263</span>;</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> mod1 = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> mod2 = <span class="number">100001611</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; hs1(m+<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; ht1(n+<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; bx1(max(m,n)+<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(s.size() == <span class="number">0</span> || t.size() == <span class="number">0</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> ans;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= max(m,n); ++i)&#123;</span><br><span class="line">		bx1[i] = (bx1[i<span class="number">-1</span>]*base1)%mod1;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)&#123;</span><br><span class="line">		hs1[i] = (hs1[i<span class="number">-1</span>]*base1 + s[i<span class="number">-1</span>])%mod1;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= n; ++i)&#123;</span><br><span class="line">		ht1[i] = (ht1[i<span class="number">-1</span>]*base1 + t[i<span class="number">-1</span>])%mod1;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">auto</span> check = [&amp;](<span class="keyword">int</span> len,<span class="keyword">long</span> <span class="keyword">long</span> mod,Answer &amp; res)&#123;</span><br><span class="line">		<span class="built_in">unordered_map</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>,<span class="keyword">int</span>&gt; cnt;</span><br><span class="line"></span><br><span class="line">		<span class="comment">/*calc string s*/</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= m-len; ++i)&#123;</span><br><span class="line">			<span class="keyword">long</span> <span class="keyword">long</span> h = (hs1[i+len] - hs1[i]*bx1[len]%mod + mod)%mod;</span><br><span class="line">			cnt[h] = i;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">/*calc string t*/</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n-len; ++i)&#123;</span><br><span class="line">			<span class="keyword">long</span> <span class="keyword">long</span> h = (ht1[i+len] - ht1[i]*bx1[len]%mod + mod)%mod;</span><br><span class="line">			<span class="keyword">if</span>(cnt.count(h))&#123;</span><br><span class="line">				res.i = cnt[h];</span><br><span class="line">				res.j = i;</span><br><span class="line">				res.len = len;</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> l = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> r = min(m,n);</span><br><span class="line">	<span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">		<span class="keyword">int</span> mid = (l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">		Answer curr;</span><br><span class="line">		<span class="keyword">if</span>(check(mid,mod1,curr))&#123;</span><br><span class="line">			ans = curr;</span><br><span class="line">			l = mid + <span class="number">1</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			r = mid - <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	ios_base::sync_with_stdio(<span class="literal">false</span>), <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">	<span class="built_in">string</span> s, t;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; s &gt;&gt; t) &#123;</span><br><span class="line">		<span class="keyword">auto</span> ans = solve(s, t);</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; ans.i &lt;&lt; <span class="string">" "</span> &lt;&lt; ans.j &lt;&lt; <span class="string">" "</span> &lt;&lt; ans.len &lt;&lt; <span class="string">"\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="6-Pattern-matching-with-mismatches"><a href="#6-Pattern-matching-with-mismatches" class="headerlink" title="6 Pattern matching with mismatches"></a>6 Pattern matching with mismatches</h3><p><strong>Task</strong>. For an integer parameter 𝑘 and two strings 𝑡 = 𝑡0𝑡1 · · · 𝑡𝑚−1 and 𝑝 = 𝑝0𝑝1 · · · 𝑝𝑛−1, we say that<br>𝑝 occurs in 𝑡 at position 𝑖 with at most 𝑘 mismatches if the strings 𝑝 and 𝑡[𝑖 : 𝑖 + 𝑝) = 𝑡𝑖𝑡𝑖+1 · · · 𝑡𝑖+𝑛−1<br>differ in at most 𝑘 positions.<br><strong>Input Format</strong>. Every line of the input contains an integer 𝑘 and two strings 𝑡 and 𝑝 consisting of lower<br>case Latin letters.<br><strong>Constraints</strong>. 0 ≤ 𝑘 ≤ 5, 1 ≤ |𝑡| ≤ 200 000, 1 ≤ |𝑝| ≤ min{|𝑡|, 100 000}. The total length of all 𝑡’s does not<br>exceed 200 000, the total length of all 𝑝’s does not exceed 100 000.<br><strong>Output Format</strong>. For each triple (𝑘, 𝑡, 𝑝), find all positions 0 ≤ 𝑖1 &lt; 𝑖2 &lt; · · · &lt; 𝑖𝑙 &lt; |𝑡| where 𝑝 occurs in 𝑡<br>with at most 𝑘 mismatches. Output 𝑙 and 𝑖1, 𝑖2, . . . , 𝑖𝑙.</p>
<h4 id="题意-10"><a href="#题意-10" class="headerlink" title="题意"></a>题意</h4><p>KR算法 + 二分查找</p>
<h4 id="思路-11"><a href="#思路-11" class="headerlink" title="思路"></a>思路</h4><ol>
<li>这个题目想了很长时间，我觉得最经典的莫过于二分查找算法的应用，关于两个字符串中查找K个字符的不同位置，竟然可以这么神奇的用二分查找算法可以在 $O(lgn)$时间复杂度内全部求出，这个真心太强大的工具了。</li>
<li>如果对这个题目感兴趣的同学，可以仔细思考下我提交的代码，非常的有意思。<h4 id="代码-10"><a href="#代码-10" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; solve(<span class="keyword">int</span> k, <span class="keyword">const</span> <span class="built_in">string</span> &amp;text, <span class="keyword">const</span> <span class="built_in">string</span> &amp;pattern) &#123;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; pos;</span><br><span class="line">	<span class="keyword">int</span> m = text.size();</span><br><span class="line">	<span class="keyword">int</span> n = pattern.size();</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> base = <span class="number">263</span>;</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; ht(m+<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; hp(n+<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; bx(m+<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(text.size() == <span class="number">0</span> || text.size() == <span class="number">0</span> || m &lt; n)&#123;</span><br><span class="line">		<span class="keyword">return</span> pos;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)&#123;</span><br><span class="line">		bx[i] = (bx[i<span class="number">-1</span>]*base)%mod;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)&#123;</span><br><span class="line">		ht[i] = (ht[i<span class="number">-1</span>]*base + text[i<span class="number">-1</span>])%mod;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= n; ++i)&#123;</span><br><span class="line">		hp[i] = (hp[i<span class="number">-1</span>]*base + pattern[i<span class="number">-1</span>])%mod;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">auto</span> hashPattern = [&amp;](<span class="keyword">int</span> x,<span class="keyword">int</span> y)&#123;</span><br><span class="line">		<span class="keyword">int</span> l = y - x + <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">long</span> <span class="keyword">long</span> curr = (hp[y+<span class="number">1</span>] - hp[x]*bx[l]%mod + mod)%mod;</span><br><span class="line">		<span class="keyword">return</span> curr;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="keyword">auto</span> hashText = [&amp;](<span class="keyword">int</span> x,<span class="keyword">int</span> y)&#123;</span><br><span class="line">		<span class="keyword">int</span> l = y - x + <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">long</span> <span class="keyword">long</span> curr = (ht[y+<span class="number">1</span>] - ht[x]*bx[l]%mod + mod)%mod;</span><br><span class="line">		<span class="keyword">return</span> curr;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= m-n; ++i)&#123;</span><br><span class="line">		<span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">int</span> end = n<span class="number">-1</span>;</span><br><span class="line">		<span class="comment">//cout&lt;&lt;"start from "&lt;&lt;i&lt;&lt;endl;</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; k; ++j)&#123;</span><br><span class="line">			<span class="keyword">if</span>(start &gt; end) <span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">int</span> l = start;</span><br><span class="line">			<span class="keyword">int</span> r = end;</span><br><span class="line">			<span class="keyword">int</span> last = r + <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">				<span class="keyword">int</span> mid = (l + r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">				<span class="keyword">if</span>(hashText(i+start,i+mid) != hashPattern(start,mid))&#123;</span><br><span class="line">					last = mid;</span><br><span class="line">					r = mid - <span class="number">1</span>;</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					l = mid + <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			start = last + <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//cout&lt;&lt;start&lt;&lt;":"&lt;&lt;end&lt;&lt;endl;</span></span><br><span class="line">		<span class="keyword">if</span>(start &gt; end || hashText(start+i,end+i) == hashPattern(start,end))&#123;</span><br><span class="line">			pos.push_back(i);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> pos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	ios_base::sync_with_stdio(<span class="literal">false</span>), <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">int</span> k;</span><br><span class="line">	<span class="built_in">string</span> t, p;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; k &gt;&gt; t &gt;&gt; p) &#123;</span><br><span class="line">		<span class="keyword">auto</span> a = solve(k, t, p);</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; a.size();</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x : a)</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; x;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="week4-Binary-Search-Trees"><a href="#week4-Binary-Search-Trees" class="headerlink" title="week4 . Binary Search Trees"></a>week4 . Binary Search Trees</h2><h3 id="1-Binary-tree-traversals"><a href="#1-Binary-tree-traversals" class="headerlink" title="1 Binary tree traversals"></a>1 Binary tree traversals</h3><h4 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h4><p><strong>Task</strong>. You are given a rooted binary tree. Build and output its in-order, pre-order and post-order traversals.<br><strong>Input Format</strong>. The first line contains the number of vertices 𝑛. The vertices of the tree are numbered<br>from 0 to 𝑛 − 1. Vertex 0 is the root.<br>The next 𝑛 lines contain information about vertices 0, 1, …, 𝑛−1 in order. Each of these lines contains<br>three integers 𝑘𝑒𝑦𝑖, 𝑙𝑒𝑓𝑡𝑖 and 𝑟𝑖𝑔ℎ𝑡𝑖 — 𝑘𝑒𝑦𝑖 is the key of the 𝑖-th vertex, 𝑙𝑒𝑓𝑡𝑖 is the index of the left<br>child of the 𝑖-th vertex, and 𝑟𝑖𝑔ℎ𝑡𝑖 is the index of the right child of the 𝑖-th vertex. If 𝑖 doesn’t have<br>left or right child (or both), the corresponding 𝑙𝑒𝑓𝑡𝑖 or 𝑟𝑖𝑔ℎ𝑡𝑖 (or both) will be equal to −1.<br><strong>Constraints</strong>. 1 ≤ 𝑛 ≤ 105; 0 ≤ 𝑘𝑒𝑦𝑖 ≤ 109; −1 ≤ 𝑙𝑒𝑓𝑡𝑖, 𝑟𝑖𝑔ℎ𝑡𝑖 ≤ 𝑛 − 1. It is guaranteed that the input<br>represents a valid binary tree. In particular, if 𝑙𝑒𝑓𝑡𝑖 ̸= −1 and 𝑟𝑖𝑔ℎ𝑡𝑖 ̸= −1, then 𝑙𝑒𝑓𝑡𝑖 ̸= 𝑟𝑖𝑔ℎ𝑡𝑖. Also,<br>a vertex cannot be a child of two different vertices. Also, each vertex is a descendant of the root vertex.<br><strong>Output Format</strong>. Print three lines. The first line should contain the keys of the vertices in the in-order<br>traversal of the tree. The second line should contain the keys of the vertices in the pre-order traversal<br>of the tree. The third line should contain the keys of the vertices in the post-order traversal of the tree.</p>
<h4 id="题意-11"><a href="#题意-11" class="headerlink" title="题意"></a>题意</h4><p>二叉树的遍历</p>
<h4 id="思路-12"><a href="#思路-12" class="headerlink" title="思路"></a>思路</h4><ol>
<li>DFS递归遍历二叉树。</li>
<li>三种遍历方式，先序遍历，中序遍历，后续遍历<h4 id="代码-11"><a href="#代码-11" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> defined(__unix__) || defined(__APPLE__)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/resource.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::ios_base;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeOrders</span> &#123;</span></span><br><span class="line">  <span class="keyword">int</span> n;</span><br><span class="line">  <span class="keyword">int</span> root;</span><br><span class="line">  <span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; key;</span><br><span class="line">  <span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; left;</span><br><span class="line">  <span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; right;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    key.resize(n);</span><br><span class="line">    left.resize(n);</span><br><span class="line">    right.resize(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">      <span class="built_in">cin</span> &gt;&gt; key[i] &gt;&gt; left[i] &gt;&gt; right[i];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">bool</span> <span class="title">dfs1</span><span class="params">(<span class="keyword">int</span> root,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp; res)</span></span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(root == <span class="number">-1</span>) <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">      dfs1(left[root],res);</span><br><span class="line">      res.push_back(key[root]);</span><br><span class="line">      dfs1(right[root],res);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; in_order() &#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; result;</span><br><span class="line">    <span class="comment">// Finish the implementation</span></span><br><span class="line">    <span class="comment">// You may need to add a new recursive method to do that</span></span><br><span class="line">    dfs1(<span class="number">0</span>,result);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">bool</span> <span class="title">dfs2</span><span class="params">(<span class="keyword">int</span> root,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp; res)</span></span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(root == <span class="number">-1</span>) <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">      res.push_back(key[root]);</span><br><span class="line">      dfs2(left[root],res);</span><br><span class="line">      dfs2(right[root],res);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; pre_order() &#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; result;    </span><br><span class="line">    <span class="comment">// Finish the implementation</span></span><br><span class="line">    <span class="comment">// You may need to add a new recursive method to do that</span></span><br><span class="line">    dfs2(<span class="number">0</span>,result);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">bool</span> <span class="title">dfs3</span><span class="params">(<span class="keyword">int</span> root,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp; res)</span></span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(root == <span class="number">-1</span>) <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">      dfs3(left[root],res);</span><br><span class="line">      dfs3(right[root],res);</span><br><span class="line">      res.push_back(key[root]);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; post_order() &#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; result;</span><br><span class="line">    <span class="comment">// Finish the implementation</span></span><br><span class="line">    <span class="comment">// You may need to add a new recursive method to do that</span></span><br><span class="line">    dfs3(<span class="number">0</span>,result);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; a)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; a.size(); i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="built_in">cout</span> &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; a[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main_with_large_stack_space</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  ios_base::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">  TreeOrders t;</span><br><span class="line">  t.read();</span><br><span class="line">  print(t.in_order());</span><br><span class="line">  print(t.pre_order());</span><br><span class="line">  print(t.post_order());</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> defined(__unix__) || defined(__APPLE__)</span></span><br><span class="line">  <span class="comment">// Allow larger stack space</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">rlim_t</span> kStackSize = <span class="number">16</span> * <span class="number">1024</span> * <span class="number">1024</span>;   <span class="comment">// min stack size = 16 MB</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">rlimit</span> <span class="title">rl</span>;</span></span><br><span class="line">  <span class="keyword">int</span> result;</span><br><span class="line"></span><br><span class="line">  result = getrlimit(RLIMIT_STACK, &amp;rl);</span><br><span class="line">  <span class="keyword">if</span> (result == <span class="number">0</span>)</span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">if</span> (rl.rlim_cur &lt; kStackSize)</span><br><span class="line">      &#123;</span><br><span class="line">          rl.rlim_cur = kStackSize;</span><br><span class="line">          result = setrlimit(RLIMIT_STACK, &amp;rl);</span><br><span class="line">          <span class="keyword">if</span> (result != <span class="number">0</span>)</span><br><span class="line">          &#123;</span><br><span class="line">              <span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; <span class="string">"setrlimit returned result = "</span> &lt;&lt; result &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> main_with_large_stack_space();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="2-Is-it-a-binary-search-tree"><a href="#2-Is-it-a-binary-search-tree" class="headerlink" title="2 Is it a binary search tree?"></a>2 Is it a binary search tree?</h3><h4 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a>题目</h4><p><strong>Task</strong>.<br>    You are given a binary tree with integers as its keys. You need to test whether it is a correct binary<br>    search tree. The definition of the binary search tree is the following: for any node of the tree, if its<br>    key is 𝑥, then for any node in its left subtree its key must be strictly less than 𝑥, and for any node in<br>    its right subtree its key must be strictly greater than 𝑥. In other words, smaller elements are to the<br>    left, and bigger elements are to the right. You need to check whether the given binary tree structure<br>    satisfies this condition. You are guaranteed that the input contains a valid binary tree. That is, it is a<br>    tree, and each node has at most two children.</p>
<h4 id="题意-12"><a href="#题意-12" class="headerlink" title="题意"></a>题意</h4><p>判定二叉树是否为二叉查找树</p>
<h4 id="思路-13"><a href="#思路-13" class="headerlink" title="思路"></a>思路</h4><ol>
<li>两个条件需要判定。</li>
<li>父节点的值一定大于左孩子，小于右孩子。</li>
<li>父节点的值一定大于左子树的最右边的节点，小于右子树的最左边的节点。<h4 id="代码-12"><a href="#代码-12" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">  <span class="keyword">int</span> key;</span><br><span class="line">  <span class="keyword">int</span> left;</span><br><span class="line">  <span class="keyword">int</span> right;</span><br><span class="line"></span><br><span class="line">  Node() : key(<span class="number">0</span>), left(<span class="number">-1</span>), right(<span class="number">-1</span>) &#123;&#125;</span><br><span class="line">  Node(<span class="keyword">int</span> key_, <span class="keyword">int</span> left_, <span class="keyword">int</span> right_) : key(key_), left(left_), right(right_) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> root,<span class="keyword">const</span> <span class="built_in">vector</span>&lt;Node&gt;&amp; tree)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tree.size() == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(root == <span class="number">-1</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">int</span> left = tree[root].left;</span><br><span class="line">    <span class="keyword">int</span> right = tree[root].right;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> isLeaf = [&amp;](<span class="keyword">int</span> curr)&#123;</span><br><span class="line">        <span class="keyword">return</span> tree[curr].left == <span class="number">-1</span> &amp;&amp; tree[curr].right == <span class="number">-1</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(isLeaf(root)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">/*check left*/</span></span><br><span class="line">    <span class="keyword">if</span>(left != <span class="number">-1</span> &amp;&amp; tree[root].key &lt;= tree[left].key) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">while</span>(left != <span class="number">-1</span> &amp;&amp; !isLeaf(left))&#123;</span><br><span class="line">        left = tree[left].right;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(left != <span class="number">-1</span> &amp;&amp; tree[left].key &gt;= tree[root].key)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*check right*/</span></span><br><span class="line">    <span class="keyword">if</span>(right != <span class="number">-1</span> &amp;&amp; tree[root].key &gt;= tree[right].key) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">while</span>(right != <span class="number">-1</span> &amp;&amp; !isLeaf(right))&#123;</span><br><span class="line">        right = tree[right].left;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(right != <span class="number">-1</span> &amp;&amp; tree[right].key &lt;= tree[root].key)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dfs(tree[root].left,tree)&amp;&amp;dfs(tree[root].right,tree);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IsBinarySearchTree</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;Node&gt;&amp; tree)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// Implement correct algorithm here</span></span><br><span class="line">  <span class="keyword">return</span> dfs(<span class="number">0</span>,tree);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> nodes;</span><br><span class="line">  <span class="built_in">cin</span> &gt;&gt; nodes;</span><br><span class="line">  <span class="built_in">vector</span>&lt;Node&gt; tree;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nodes; ++i) &#123;</span><br><span class="line">    <span class="keyword">int</span> key, left, right;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; key &gt;&gt; left &gt;&gt; right;</span><br><span class="line">    tree.push_back(Node(key, left, right));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (IsBinarySearchTree(tree)) &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"CORRECT"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"INCORRECT"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="3-Is-it-a-binary-search-tree-Hard-version"><a href="#3-Is-it-a-binary-search-tree-Hard-version" class="headerlink" title="3 Is it a binary search tree? Hard version."></a>3 Is it a binary search tree? Hard version.</h3><h4 id="题目-2"><a href="#题目-2" class="headerlink" title="题目"></a>题目</h4><p><strong>Task</strong>. You are given a binary tree with integers as its keys. You need to test whether it is a correct binary<br>search tree. Note that there can be duplicate integers in the tree, and this is allowed. The definition of<br>the binary search tree in such case is the following: for any node of the tree, if its key is 𝑥, then for any<br>node in its left subtree its key must be strictly less than 𝑥, and for any node in its right subtree its key<br>must be greater than or equal to 𝑥. In other words, smaller elements are to the left, bigger elements<br>are to the right, and duplicates are always to the right. You need to check whether the given binary<br>tree structure satisfies this condition. You are guaranteed that the input contains a valid binary tree.<br>That is, it is a tree, and each node has at most two children.</p>
<h4 id="题意-13"><a href="#题意-13" class="headerlink" title="题意"></a>题意</h4><p>判定二叉树是否为二叉查找树，这题跟第二题一样</p>
<h4 id="思路-14"><a href="#思路-14" class="headerlink" title="思路"></a>思路</h4><ol>
<li>两个条件需要判定。</li>
<li>父节点的值一定大于左孩子，小于右孩子。</li>
<li>父节点的值一定大于左子树的最右边的节点，小于右子树的最左边的节点。<h4 id="代码-13"><a href="#代码-13" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">  <span class="keyword">int</span> key;</span><br><span class="line">  <span class="keyword">int</span> left;</span><br><span class="line">  <span class="keyword">int</span> right;</span><br><span class="line"></span><br><span class="line">  Node() : key(<span class="number">0</span>), left(<span class="number">-1</span>), right(<span class="number">-1</span>) &#123;&#125;</span><br><span class="line">  Node(<span class="keyword">int</span> key_, <span class="keyword">int</span> left_, <span class="keyword">int</span> right_) : key(key_), left(left_), right(right_) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> root,<span class="keyword">const</span> <span class="built_in">vector</span>&lt;Node&gt;&amp; tree)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tree.size() == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(root == <span class="number">-1</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">int</span> left = tree[root].left;</span><br><span class="line">    <span class="keyword">int</span> right = tree[root].right;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> isLeaf = [&amp;](<span class="keyword">int</span> curr)&#123;</span><br><span class="line">        <span class="keyword">return</span> tree[curr].left == <span class="number">-1</span> &amp;&amp; tree[curr].right == <span class="number">-1</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(isLeaf(root)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">/*check left*/</span></span><br><span class="line">    <span class="keyword">if</span>(left != <span class="number">-1</span> &amp;&amp; tree[root].key &lt;= tree[left].key) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">while</span>(left != <span class="number">-1</span> &amp;&amp; !isLeaf(left))&#123;</span><br><span class="line">        left = tree[left].right;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(left != <span class="number">-1</span> &amp;&amp; tree[left].key &gt;= tree[root].key)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*check right*/</span></span><br><span class="line">    <span class="keyword">if</span>(right != <span class="number">-1</span> &amp;&amp; tree[root].key &gt; tree[right].key) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">while</span>(right != <span class="number">-1</span> &amp;&amp; !isLeaf(right))&#123;</span><br><span class="line">        right = tree[right].left;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(right != <span class="number">-1</span> &amp;&amp; tree[right].key &lt; tree[root].key)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dfs(tree[root].left,tree)&amp;&amp;dfs(tree[root].right,tree);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IsBinarySearchTree</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;Node&gt;&amp; tree)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// Implement correct algorithm here</span></span><br><span class="line">  <span class="keyword">return</span> dfs(<span class="number">0</span>,tree);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> nodes;</span><br><span class="line">  <span class="built_in">cin</span> &gt;&gt; nodes;</span><br><span class="line">  <span class="built_in">vector</span>&lt;Node&gt; tree;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nodes; ++i) &#123;</span><br><span class="line">    <span class="keyword">int</span> key, left, right;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; key &gt;&gt; left &gt;&gt; right;</span><br><span class="line">    tree.push_back(Node(key, left, right));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (IsBinarySearchTree(tree))&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"CORRECT"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"INCORRECT"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="4-Set-with-range-sums"><a href="#4-Set-with-range-sums" class="headerlink" title="4 Set with range sums"></a>4 Set with range sums</h3><h4 id="题目-3"><a href="#题目-3" class="headerlink" title="题目"></a>题目</h4><p><strong>Task</strong>. Implement a data structure that stores a set 𝑆 of integers with the following allowed operations:</p>
<ul>
<li><strong>add(𝑖)</strong> — add integer 𝑖 into the set 𝑆 (if it was there already, the set doesn’t change).</li>
<li><strong>del(𝑖)</strong> — remove integer 𝑖 from the set 𝑆 (if there was no such element, nothing happens).</li>
<li><strong>find(𝑖)</strong> — check whether 𝑖 is in the set 𝑆 or not.</li>
<li><strong>sum(𝑙, 𝑟)</strong> — output the sum of all elements 𝑣 in 𝑆 such that 𝑙 ≤ 𝑣 ≤ 𝑟.<h4 id="题意-14"><a href="#题意-14" class="headerlink" title="题意"></a>题意</h4>这题本意是用splay tree，但是对于splaytree的扭转确实太复杂，太难记了。</li>
</ul>
<h4 id="思路-15"><a href="#思路-15" class="headerlink" title="思路"></a>思路</h4><ol>
<li>这题不用splaytree，完全可以用skiplist。</li>
<li>利用skiplist的插入时间复杂度为$O(lgn)$.</li>
<li>利用skiplist的删除时间复杂度为$O(lgn)$.</li>
<li>利用skiplist的find时间复杂度为$O(lgn)$.</li>
<li>利用skiplist的sum的时间复杂度为$O(lgn)$.</li>
<li>skiplist代码就没有实现，感兴趣可以找一下开源代码实现。<h4 id="代码-14"><a href="#代码-14" class="headerlink" title="代码"></a>代码</h4></li>
</ol>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>数据结构这个课程比前几个课程简单多了，前面几个算法课程的题目非常难，一度以为怀疑自己的智商，后来终于搞定了，基本上绝大部分都是100分，现在又要开始刷<code>standford</code>的算法课程，真心头大，真心痛苦。我想人总是会在痛苦和压力中成长起来。</p>

    </div>

    
    
    
        <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center;">
  <img id="wechat_subscriber_qcode" src="/images/2876768308.jpg" alt="Mike meng wechat" style="width: 200px; max-width: 100%;">
  <div>个人技术成长记录.</div>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E3%80%8AData-Structure%E3%80%8B/" rel="tag"># 《Data Structure》</a>
          </div>

        
  <div class="post-widgets">
    <div class="wp_rating">
      <div id="wpac-rating"></div>
    </div>
  </div>

    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container_site_pv">总访问量<span id="busuanzi_value_site_pv"></span>次</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">总访客<span id="busuanzi_value_site_uv"></span>人</span>
    <span class="post-meta-divider">|</span>


          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
                <a href="/2020/06/02/168/" rel="next" title="数位DP">
                  <i class="fa fa-chevron-left"></i> 数位DP
                </a>
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
                <a href="/2020/06/07/170/" rel="prev" title="【Leetcode】 192周比赛">
                  【Leetcode】 192周比赛 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    <div class="comments" id="comments"></div>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Data-Structure"><span class="nav-number">1.</span> <span class="nav-text">Data Structure</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#week1-Basic-Data-Structures"><span class="nav-number">1.1.</span> <span class="nav-text">week1.Basic Data Structures</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-Check-brackets-in-the-code"><span class="nav-number">1.1.1.</span> <span class="nav-text">1 1 Check brackets in the code</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#题意"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#思路"><span class="nav-number">1.1.1.2.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#代码"><span class="nav-number">1.1.1.3.</span> <span class="nav-text">代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Compute-tree-height"><span class="nav-number">1.1.2.</span> <span class="nav-text">2 Compute tree height</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#题意-1"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#思路-1"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#代码-1"><span class="nav-number">1.1.2.3.</span> <span class="nav-text">代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Network-packet-processing-simulation"><span class="nav-number">1.1.3.</span> <span class="nav-text">3 Network packet processing simulation</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#题意-2"><span class="nav-number">1.1.3.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#思路-2"><span class="nav-number">1.1.3.2.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#代码-2"><span class="nav-number">1.1.3.3.</span> <span class="nav-text">代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Extending-stack-interface"><span class="nav-number">1.1.4.</span> <span class="nav-text">4 Extending stack interface</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#题意-3"><span class="nav-number">1.1.4.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#思路-3"><span class="nav-number">1.1.4.2.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#代码-3"><span class="nav-number">1.1.4.3.</span> <span class="nav-text">代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Maximum-in-Sliding-Window"><span class="nav-number">1.1.5.</span> <span class="nav-text">5 Maximum in Sliding Window</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#题意-4"><span class="nav-number">1.1.5.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#思路-4"><span class="nav-number">1.1.5.2.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#代码-4"><span class="nav-number">1.1.5.3.</span> <span class="nav-text">代码</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#week2-Priority-Queues-and-Disjoint-Sets"><span class="nav-number">1.2.</span> <span class="nav-text">week2. Priority Queues and Disjoint Sets</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Convert-array-into-heap"><span class="nav-number">1.2.1.</span> <span class="nav-text">1 Convert array into heap</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#题意-5"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#思路-5"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#代码-5"><span class="nav-number">1.2.1.3.</span> <span class="nav-text">代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Parallel-processing"><span class="nav-number">1.2.2.</span> <span class="nav-text">2 Parallel processing</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#题意-6"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#思路-6"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#代码-6"><span class="nav-number">1.2.2.3.</span> <span class="nav-text">代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Merging-tables"><span class="nav-number">1.2.3.</span> <span class="nav-text">3 Merging tables</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#题意-7"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#思路-7"><span class="nav-number">1.2.3.2.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#代码-7"><span class="nav-number">1.2.3.3.</span> <span class="nav-text">代码</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#week3-Hash-Tables-and-Hash-Functions"><span class="nav-number">1.3.</span> <span class="nav-text">week3: Hash Tables and Hash Functions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Find-pattern-in-text"><span class="nav-number">1.3.1.</span> <span class="nav-text">3 Find pattern in text</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#题意-8"><span class="nav-number">1.3.1.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#思路-8"><span class="nav-number">1.3.1.2.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#代码-8"><span class="nav-number">1.3.1.3.</span> <span class="nav-text">代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Substring-equality"><span class="nav-number">1.3.2.</span> <span class="nav-text">4 Substring equality</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#思路-9"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#null"><span class="nav-number">1.3.2.2.</span> <span class="nav-text"> </span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Longest-common-substring"><span class="nav-number">1.3.3.</span> <span class="nav-text">5 Longest common substring</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#题意-9"><span class="nav-number">1.3.3.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#思路-10"><span class="nav-number">1.3.3.2.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#代码-9"><span class="nav-number">1.3.3.3.</span> <span class="nav-text">代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-Pattern-matching-with-mismatches"><span class="nav-number">1.3.4.</span> <span class="nav-text">6 Pattern matching with mismatches</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#题意-10"><span class="nav-number">1.3.4.1.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#思路-11"><span class="nav-number">1.3.4.2.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#代码-10"><span class="nav-number">1.3.4.3.</span> <span class="nav-text">代码</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#week4-Binary-Search-Trees"><span class="nav-number">1.4.</span> <span class="nav-text">week4 . Binary Search Trees</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Binary-tree-traversals"><span class="nav-number">1.4.1.</span> <span class="nav-text">1 Binary tree traversals</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#题目"><span class="nav-number">1.4.1.1.</span> <span class="nav-text">题目</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#题意-11"><span class="nav-number">1.4.1.2.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#思路-12"><span class="nav-number">1.4.1.3.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#代码-11"><span class="nav-number">1.4.1.4.</span> <span class="nav-text">代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Is-it-a-binary-search-tree"><span class="nav-number">1.4.2.</span> <span class="nav-text">2 Is it a binary search tree?</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#题目-1"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">题目</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#题意-12"><span class="nav-number">1.4.2.2.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#思路-13"><span class="nav-number">1.4.2.3.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#代码-12"><span class="nav-number">1.4.2.4.</span> <span class="nav-text">代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Is-it-a-binary-search-tree-Hard-version"><span class="nav-number">1.4.3.</span> <span class="nav-text">3 Is it a binary search tree? Hard version.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#题目-2"><span class="nav-number">1.4.3.1.</span> <span class="nav-text">题目</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#题意-13"><span class="nav-number">1.4.3.2.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#思路-14"><span class="nav-number">1.4.3.3.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#代码-13"><span class="nav-number">1.4.3.4.</span> <span class="nav-text">代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Set-with-range-sums"><span class="nav-number">1.4.4.</span> <span class="nav-text">4 Set with range sums</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#题目-3"><span class="nav-number">1.4.4.1.</span> <span class="nav-text">题目</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#题意-14"><span class="nav-number">1.4.4.2.</span> <span class="nav-text">题意</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#思路-15"><span class="nav-number">1.4.4.3.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#代码-14"><span class="nav-number">1.4.4.4.</span> <span class="nav-text">代码</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结"><span class="nav-number">1.5.</span> <span class="nav-text">总结</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="Mike meng"
    src="/images/pic.jpg">
  <p class="site-author-name" itemprop="name">Mike meng</p>
  <div class="site-description" itemprop="description">a clever man and a foolish man!</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">152</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/mike-box" title="GitHub &amp;rarr; https:&#x2F;&#x2F;github.com&#x2F;mike-box" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:mml1106@126.com" title="E-Mail &amp;rarr; mailto:mml1106@126.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://github.com/mike-box/mike-box.github.io/blob/master/atom.xml" title="Feed &amp;rarr; https:&#x2F;&#x2F;github.com&#x2F;mike-box&#x2F;mike-box.github.io&#x2F;blob&#x2F;master&#x2F;atom.xml" rel="noopener" target="_blank"><i class="fa fa-fw fa-Feed"></i>Feed</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv" >| 总访问量 <span id="busuanzi_value_site_pv"></span> 次 </span>
<span id="busuanzi_container_site_uv" >| 总访客数 <span id="busuanzi_value_site_uv"></span> 人 </span>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.2"></script><script src="/js/motion.js?v=7.4.2"></script>
<script src="/js/schemes/pisces.js?v=7.4.2"></script>
<script src="/js/next-boot.js?v=7.4.2"></script>



  





  <script>
  if (CONFIG.page.isPost) {
    wpac_init = window.wpac_init || [];
    wpac_init.push({
      widget: 'Rating',
      id: ,
      el: 'wpac-rating',
      color: 'fc6423'
    });
    (function() {
      if ('WIDGETPACK_LOADED' in window) return;
      WIDGETPACK_LOADED = true;
      var mc = document.createElement('script');
      mc.type = 'text/javascript';
      mc.async = true;
      mc.src = '//embed.widgetpack.com/widget.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
    })();
  }
  </script>













  

  
      
<script type="text/x-mathjax-config">
    MathJax.Ajax.config.path['mhchem'] = '//cdn.jsdelivr.net/npm/mathjax-mhchem@3';

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
        extensions: ['[mhchem]/mhchem.js'],
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    

  

  


<script>
NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(item => {
    return GUEST.includes(item);
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: '8Dt7hB7Fx8exlW88EXinb5mF-gzGzoHsz',
    appKey: 'aWHmgsVOAHuLla4w3OV0UOqh',
    placeholder: "Just go go",
    avatar: 'wavatar',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false,
    lang: '' || 'zh-cn',
    path: location.pathname,
    recordIP: false,
    serverURLs: ''
  });
}, window.Valine);
</script>

</body>
</html>
